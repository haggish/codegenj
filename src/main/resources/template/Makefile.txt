# generated by codegenj - Do not edit!

IDIR =./include
CC=gcc
CFLAGS=-fPIC -Wall -g -I$(IDIR) -I$(JAVA_HOME)/include -I$(JAVA_HOME)/include/linux -I/usr/include/glib-2.0 -I/usr/lib/arm-linux-gnueabihf/glib-2.0/include -I/usr/include/gio-unix-2.0

ODIR=obj
LDIR =../lib

LIBS=-L/lib/arm-linux-gnueabihf -lm -lglib-2.0 -lgobject-2.0 -lgio-2.0

_DEPS = $$$headerfiles$$$
DEPS = $(patsubst %,$(IDIR)/%,$(_DEPS))

_OBJ = $$$library$$$-codegen.o ObjectManager.o $$$objfiles$$$
OBJ = $(patsubst %,$(ODIR)/%,$(_OBJ))

$(IDIR)/%.h:
	javah -d include -classpath ../classes $$$classlist$$$
	rm -rf $(ODIR)
	mkdir $(ODIR)

$$$library$$$-codegen.c: $(IDIR)/%.h
	gdbus-codegen --generate-c-code=$$$library$$$-codegen --c-generate-object-manager --c-namespace= --interface-prefix=$$$iprefix$$$ ../classes/$$$xmlfile$$$
	mv $$$library$$$-codegen.h include/$$$library$$$-codegen.h

$(ODIR)/%.o: %.c $(DEPS)
	$(CC) -c -o $@ $< $(CFLAGS)

lib$$$library$$$.so.1.0: $(OBJ)
	gcc -ggdb3 -shared -lc -o $@ $^ $(CFLAGS) $(LIBS)

all: lib$$$library$$$.so.1.0

.PHONY: clean

clean:
	rm -f $(ODIR)/*.o *~ core $(INCDIR)/*~ $$$library$$$-codegen.c $(IDIR)/*.h

